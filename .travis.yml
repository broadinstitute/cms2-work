sudo: required

dist: focal
os: linux

git:
  depth: 25
  submodules: false

services:
  - docker

env:
  global:
    - LANGUAGE=wdl
    # QUAY_IO_PW
    - secure: "Ml0d/dDodYSYtcDPlOtC1x4XwbLQKmDWZJV/U69MuhG6SMSTunzhRHdDhoIDHlS4f34lx6yyaoHbzINxX35uPukVDSqfZU9Nm/bIVwpAVYgPGziv8EutVn2UHYpWLK+d1s+I+MODWr506LfSDvzjnPaPvvnrJeNKVyTgFWeSnyLQZttlRjU27agoVVKpXb22gyWRk9dX4ac5PybnDk7irzd7rl/dwviCgqcHQW4vDCjiGhLvE26PrdLgF7fGui3MqO39BGI+hCzkGoAN/suuuVnLdt2DtAf0PPke76UwmHEnLFKC5z6/GJostEG+ov78wlkjITltLYXTwgYqJB9d6XsjB2dLsWumaYPf3HaBp7hZx3LPmwf0aHhvKBTqD/AntU/fsRxrpGKZJiqKCz0JihVkW3Ac/gSaHYEemr2l5mujqHY45PetDqIbZU+Hn27Q4L/EPbGj0uq2g7We38LoD6S+ScaaepFp+PLgqSKK2FlXajXPtSkIDsbbWWBTnxdByCmb7uIU7RCg03QAU8OuDq7ENcO715+q2oeSIvZgfjILrxpC/Wj5qz+qhbyb4MieuluxQYOoZOq1uqY2DXwO/n0vePDBWUIlYA13WNL/kqSxmKlZjlfJDZMh6IRqGAy+YOLis4ZiLofTa5ivfRAursCUJvgAPx1yWJ1HMS4kzNw="
    - QUAY_IO_USER=ilya_broad

branches:
  except:
    - /.*-staging$/
    - /^staging-.*/

# notifications:
#   slack: 
#     on_success: never
#     on_failure: always
#     rooms:
#       - oicr:S9k4EowgQv9AnbCfEZHSzCsg

stages:
  - main

jobs:
  fast_finish: true
  include:
    
    - language: python
      stage: main
      python: "3.8"
      # before_install:
      #   - sudo apt-get update
      #   - sudo apt-get -y install openjdk-8-jre-headless
#       install:
# #        - pip3 -q install miniwdl
#         - pip3 -q install firecloud
      script:
        - set -e
        - ./travis/build-recipes.sh

#language: java
#jdk: 
#  - openjdk11

#before_install:
#  - docker build -t quay.io/ilya_broad/dockstore-tool-cosi2 .
#  - pyenv global 3.6

#install: 
#  - bash install.sh
